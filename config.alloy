logging {
  level = "info"
}

prometheus.scrape "wallet_app" {
  targets = [
    {
      __address__ = "wallet-app:8080",
    },
  ]

  forward_to = [prometheus.remote_write.metrics_hosted_prometheus.receiver]
}

prometheus.remote_write "metrics_hosted_prometheus" {
  endpoint {
    name = "hosted-prometheus"
    url  = env("GRAFANA_PROM_REMOTE_WRITE_URL")

    basic_auth {
      username = env("GRAFANA_PROM_USERNAME")
      password = env("GRAFANA_PROM_PASSWORD")
    }
  }
}